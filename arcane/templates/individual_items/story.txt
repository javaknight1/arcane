Generate detailed content for Story {story_number}: {story_title}

=== PROJECT CONTEXT ===
Project: {project_context}
Epic: {epic_context}

=== CASCADING CONTEXT ===
The following context shows decisions and outputs from previously generated items.
Your generation MUST be consistent with this context.
{cascading_context}

=== ROADMAP OVERVIEW ===
{roadmap_overview}

=== CONSISTENCY REQUIREMENTS ===
Based on the above context:
- Maintain consistency with decisions listed in cascading context
- Reference and build upon work from parent items
- Avoid contradicting or duplicating sibling items
- Ensure technical choices align with earlier decisions

=== STORY REQUIREMENTS ===
This story should be a cohesive unit of work that delivers user value.
It must include specific, testable acceptance criteria.
Tasks generated should fully complete all acceptance criteria.

=== EXPECTED TASKS ===
{expected_tasks}

=== REQUIRED OUTPUT FORMAT ===
Provide ALL fields using EXACT markers below. Do not skip any section.

:::STORY_DESCRIPTION:::
[2-4 sentences describing what this story delivers and why it matters to users/stakeholders. Be specific about the value proposition.]

:::USER_VALUE:::
[1-2 sentences from the user's perspective: "As a [user type], I want [capability] so that [benefit]"]

:::ACCEPTANCE_CRITERIA:::
[List 3-6 specific, testable acceptance criteria. Each should be verifiable.]
- [ ] Criterion 1: [Specific, measurable condition]
- [ ] Criterion 2: [Specific, measurable condition]
- [ ] Criterion 3: [Specific, measurable condition]
- [ ] Criterion 4: [Specific, measurable condition]

:::TECHNICAL_REQUIREMENTS:::
[List technical aspects that implementers should know]
- Technical consideration 1
- Technical consideration 2
- Technical consideration 3

:::PREREQUISITES:::
[List dependencies on other stories or tasks. Use IDs when possible. Write "None" if no prerequisites.]
- Story X.X.X: [Name] - [Why it's needed]
- Task X.X.X.X: [Name] - [Why it's needed]

:::BENEFITS:::
[List 3-5 specific benefits of completing this story]
- Benefit 1
- Benefit 2
- Benefit 3

:::WORK_TYPE:::
[Choose exactly ONE: implementation | design | research | testing | documentation | configuration | deployment]

:::COMPLEXITY:::
[Choose exactly ONE: simple | moderate | complex]

:::PRIORITY:::
[Choose exactly ONE: Critical | High | Medium | Low]

:::DURATION_HOURS:::
[Total estimated hours for the story including all tasks. Just the number.]

:::TAGS:::
[Comma-separated tags: scope tags (core-scope, extended-scope), technical tags (frontend, backend, etc.), functional tags (authentication, payments, etc.)]

=== TASK GENERATION ===
Now generate detailed content for each task in this story.
Each task must follow this exact format:

###TASK_START### {task_id}
:::TASK_TITLE:::
[Clear, action-oriented title]

:::TASK_GOAL:::
[2-3 sentences describing what this specific task accomplishes]

:::TASK_BENEFITS:::
[List 2-4 specific benefits]
- Benefit 1
- Benefit 2

:::TASK_TECHNICAL_REQUIREMENTS:::
[Specific technical requirements for this task]
- Requirement 1
- Requirement 2

:::TASK_PREREQUISITES:::
[Task IDs or "None"]

:::TASK_CLAUDE_CODE_PROMPT:::
[Detailed implementation prompt with:
- Files to create/modify
- Code structure
- Testing requirements
- Integration points
- Edge cases to handle]

:::TASK_WORK_TYPE:::
[implementation | design | research | testing | documentation | configuration | deployment]

:::TASK_COMPLEXITY:::
[simple | moderate | complex]

:::TASK_DURATION_HOURS:::
[Number only]

:::TASK_PRIORITY:::
[Critical | High | Medium | Low]

:::TASK_TAGS:::
[Comma-separated tags]
###TASK_END###

[Generate a ###TASK_START### to ###TASK_END### block for EACH expected task listed above]

=== QUALITY CHECKLIST ===
Before submitting, verify:
1. All story fields are filled with meaningful content
2. Acceptance criteria are specific and testable
3. Each task has all required fields populated
4. Tasks collectively complete ALL acceptance criteria
5. Duration estimates are realistic
6. No placeholder or truncated content
